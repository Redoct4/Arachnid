
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <style>
      #scanning-overlay {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        background: rgba(0,0,0,0.6);
        color: #fff;
        font-size: 2em;
        font-family: Arial, sans-serif;
        z-index: 10;
        transition: opacity 0.3s;
        pointer-events: none;
      }
      #scanning-overlay.hidden {
        display: none;
      }
    </style>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        // --- Cambia de modelo con click/tap ---
        let spiderState = 1;
        const spiderModel1 = document.querySelector("#spider1");
        const spiderModel2 = document.querySelector("#spider2");
        const spiderClickable = document.querySelector("#spider-clickable");
        spiderClickable.addEventListener("click", () => {
          if (spiderState === 1) {
            spiderModel1.setAttribute("visible", "false");
            spiderModel2.setAttribute("visible", "true");
            spiderState = 2;
          } else {
            spiderModel1.setAttribute("visible", "true");
            spiderModel2.setAttribute("visible", "false");
            spiderState = 1;
          }
        });

        let tarantulaState = 1;
        const tarantulaModel1 = document.querySelector("#tarantula1");
        const tarantulaModel2 = document.querySelector("#tarantula2");
        const tarantulaClickable = document.querySelector("#tarantula-clickable");
        tarantulaClickable.addEventListener("click", () => {
          if (tarantulaState === 1) {
            tarantulaModel1.setAttribute("visible", "false");
            tarantulaModel2.setAttribute("visible", "true");
            tarantulaState = 2;
          } else {
            tarantulaModel1.setAttribute("visible", "true");
            tarantulaModel2.setAttribute("visible", "false");
            tarantulaState = 1;
          }
        });
      });
    </script>
  </head>
  <body>
    <!-- Custom scanning overlay -->
    <div id="scanning-overlay" class="hidden">
      Scan the arachnid targets
    </div>
    <a-scene
      mindar-image="imageTargetSrc: ./targetBoth.mind; maxTrack: 2; uiScanning: #scanning-overlay; uiLoading: no; uiError: no"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false">
      <a-assets>
        <a-asset-item id="spiderModel1" src="./Spider1.glb"></a-asset-item>
        <a-asset-item id="spiderModel2" src="./Spider2.glb"></a-asset-item>
        <a-asset-item id="tarantulaModel1" src="./Tarantula1.glb"></a-asset-item>
        <a-asset-item id="tarantulaModel2" src="./Tarantula2.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0"
                look-controls="enabled: false"
                cursor="fuse: false; rayOrigin: mouse;"
                raycaster="far: 10000; objects: .clickable">
      </a-camera>

      <!-- Target 1: Spider -->
      <a-entity mindar-image-target="targetIndex: 1">
        <a-entity id="spider1" gltf-model="#spiderModel1" class="clickable"
                  rotation="0 0 0" position="0 -0.25 0" scale="6 6 6"
                  animation-mixer visible="true"></a-entity>
        <a-entity id="spider2" gltf-model="#spiderModel2" class="clickable"
                  rotation="0 0 0" position="0 -0.25 0" scale="6 6 6"
                  animation-mixer visible="false"></a-entity>
        <a-entity id="spider-clickable" class="clickable"
                  position="0 0 0"
                  geometry="primitive: box; width: 1; height: 1; depth: 1"
                  material="opacity: 0; transparent: true"></a-entity>
      </a-entity>

      <!-- Target 0: Tarantula -->
      <a-entity mindar-image-target="targetIndex: 0">
        <a-entity id="tarantula1" gltf-model="#tarantulaModel1" class="clickable"
                  rotation="0 0 0" position="0 -0.25 0" scale="6 6 6"
                  animation-mixer visible="true"></a-entity>
        <a-entity id="tarantula2" gltf-model="#tarantulaModel2" class="clickable"
                  rotation="0 0 0" position="0 -0.25 0" scale="6 6 6"
                  animation-mixer visible="false"></a-entity>
        <a-entity id="tarantula-clickable" class="clickable"
                  position="0 0 0"
                  geometry="primitive: box; width: 1; height: 1; depth: 1"
                  material="opacity: 0; transparent: true"></a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
